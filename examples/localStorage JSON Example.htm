<doctype html>
<html>
<head>
    <title>HTML5 Hackathon - localStorage JSON example</title>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.5.1.min.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {
			// first run
            $("#storageCounter").html(localStorage.length);
			var key = localStorage.length;
				
            $("#btnClearStorage").click(function () {
                localStorage.clear();
                $("#storageCounter").html(localStorage.length);
            });

            $("#btnAddStorage").click(function () {
				var user = {};
				user.firstname = $("#firstname").attr("value");
				user.lastname = $("#lastname").attr("value");
				user.job = $("#job").attr("value");
				user.email = $("#email").attr("value");
				
			
                localStorage.setItem(key++, JSON.stringify(user));
                $("#storageCounter").html(localStorage.length);
				
				
            });

            $("#btnRetrieveStorage").click(function () {
                var res = "";
                var len = localStorage.length;
                var i = 0;

                for (i = 0; i < len; i++) {
                    res += "key: " + localStorage.key(i) + ", values: " + localStorage.getItem(localStorage.key(i)) + "<br />";
                }

                $("#content").html(res);
            });

        });

    </script>
</head>
<body>
    <!--Key:
    <input type="text" id="keyField" /> -->
    <h3>Content</h3>
    Firstname:<input type="text" id="firstname" /><br />
	Lastname: <input type="text" id="lastname" /> <br />
	Job<input type="text" id="job" /><br />
	Email<input type="text" id="email" /><br />
	
    <input type="button" value="Add Storage" id="btnAddStorage" />
    <br />
    <br />
    <div id="content" style="width: 700px; height: 200px; border: 1px solid black;">
    </div>
    Storage content
    <div id="storageCounter">
    </div>
    <br />
    <br />
    <input type="button" value="Retrieve Storage" id="btnRetrieveStorage" />
    <input type="button" value="clear storage" id="btnClearStorage" />
</body>
</html>
